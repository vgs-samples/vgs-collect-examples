<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VGS Collect Shipping Info Example</title>

  <!--Include generated for your organization JS file into an application.
      File below is just our example. Please use your own JS file inside your application.-->
  <script src="path/to/your/personal/VGS-Collect/library/<organization-id>.js"></script>

  <style>
    span[id*="cc-"] {
      display: block;
      height: 40px;
      width: 300px;
      margin-bottom: 15px;
    }

    span[id*="cc-"] iframe {
      height: 100%;
      width: 100%;
    }
  </style>

</head>
<body>
<main>
  <!--Create Shipping Info form-->
  <form id="cc-form-shipping-info">
    <fieldset>
      <!--First name-->
      <label for="cc-first-name">First Name</label>
      <span id="cc-first-name">
        <!--VGS Collect iframe for the first name field will be here!-->
      </span>

      <!--Last name-->
      <label for="cc-last-name">Last Name</label>
      <span id="cc-last-name">
        <!--VGS Collect iframe for the last name field will be here!-->
      </span>

      <!--Address-->
      <label for="cc-address">Address</label>
      <span id="cc-address">
        <!--VGS Collect iframe for address field will be here!-->
      </span>

      <!--Country-->
      <label for="cc-country">Country</label>
      <span id="cc-country">
        <!--VGS Collect iframe for country field will be here!-->
      </span>

      <!--City-->
      <label for="cc-city">City</label>
      <span id="cc-city">
        <!--VGS Collect iframe for city field will be here!-->
      </span>

      <!--Region-->
      <label for="cc-region">Region</label>
      <span id="cc-region">
        <!--VGS Collect iframe for region field will be here!-->
      </span>

      <!--Zip Code-->
      <label for="cc-zip">Zip Code</label>
      <span id="cc-zip">
        <!--VGS Collect iframe for zip code field will be here!-->
      </span>
    </fieldset>
    <!--Submit Shipping Info form button-->
    <button type="submit" class="btn btn-info">Send</button>
  </form>
</main>

<!--Include script with VGS Collect form initialization-->
<script>
  /*  VGS Collect form initialization
 *   VGSCollect.create(environment, onUpdateCallback) → Form
 *     @constructor VGSCollect
 *     @param {string} environment - your `vault id`, that this form will submit to.
 *                                   https://www.verygoodsecurity.com/docs/terminology/nomenclature#vault
 *     @param {function} onUpdateCallback - callback that will be called whenever the form state changes
 *                                          It receives the state object representing the current state
 *     @returns {object} Form
 * */

  const shipping_form = VGSCollect.create('tntgwauwbm1', function(state) {
    /* @returns {object} state - state object represents the current form state */
  });

  /*  Create VGS Collect field for the first name
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-first-name', {
    type: 'text',
    name: 'shipping.first_name',
    placeholder: 'Joe',
    validations: ['required'],
  });

  /*  Create VGS Collect field for the last name
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-last-name', {
    type: 'text',
    name: 'shipping.last_name',
    placeholder: 'Business',
    validations: ['required'],
  });

  /*  Create VGS Collect field for an address
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-address', {
    type: 'text',
    name: 'shipping.address',
    placeholder: 'Address',
    validations: ['required'],
  });

  /*  Create VGS Collect field for country
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-country', {
    type: 'dropdown',
    name: 'shipping.country',
    placeholder: 'Select Country',
    validations: ['required'],
    options: [
      {value: 'USA', text: 'United States of America'},
      {value: 'Canada', text: 'Canada'},
      {value: 'Mexica', text: 'Mexica'},
    ]
  });

  /*  Create VGS Collect field for the city
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-city', {
    type: 'text',
    name: 'shipping.city',
    placeholder: 'City',
    validations: ['required'],
  });

  /*  Create VGS Collect field for the region
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-region', {
    type: 'text',
    name: 'shipping.region',
    placeholder: 'Region',
    validations: ['required'],
  });

  /*  Create VGS Collect field for zip code
  *   Form#field(selector, properties) → Field
  *     @param {string} selector - CSS Selector that points to the element where the field will be added
  *     @param {object} properties - set of configurable options
  *     @returns {object} Field
  * */
  shipping_form.field('#cc-zip', {
    type: 'zip-code',
    name: 'shipping.zip',
    placeholder: 'Zip Code',
    validations: ['required'],
  });

  /*  Submits all of the form fields by executing a POST request.
  *   Form#submit(path, options, callback, errorCallback) → Form
  *     @param {string} path - path that the form will be submitted to
  *     @param {object} options - options object that can include additional 'serializer', 'data' and request 'headers'
  *     @param {function} callback - will be executed when the HTTPRequest is finished
  *     @param {function} errorCallback(optional) - error handling callback
  * */
  document.getElementById('cc-form-shipping-info')
    .addEventListener('submit', function(e) {
      e.preventDefault();
      form.submit('/post', {
        headers: {
          'x-custom-header': 'Oh yes. I am a custom header',
        },
        data: {
          type: 'card',
        },
      }, function(status, data) {
        /*  @callback
         *  @param {number} status - status code
         *  @param {object} data - response data
         * */
      });
    }, function (errors) {
      /*  @callback errorCallback
      *   @param {object} errors - returned errors
      *   */
    });
</script>
</body>
</html>
